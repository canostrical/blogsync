{{ $pathParts := splitList "/" .OriginalReq.URL.Path }}
{{ $markdownFilename := default "index" (slice $pathParts 2 | join "/") }}
{{ $markdownFilePath := printf "/markdown/%s.md" $markdownFilename }}
{{ if not (fileExists $markdownFilePath) }}{{ httpError 404 }}{{ end }}
{{ $markdownFile := (include $markdownFilePath | splitFrontMatter) }}
{{ $title := default $markdownFilename $markdownFile.Meta.title }}
<!DOCTYPE html>
<html>
	<head>
		<title>{{$title}} &mdash; Caddy Example</title>
    </head>
    <body>
        <article>{{markdown $markdownFile.Body}}</article>
    </body>
</html>